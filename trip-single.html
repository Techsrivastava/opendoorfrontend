<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    <!-- Primary Meta Tags (Dynamic - Updated by JavaScript) -->
    <title>Tour Package Details | Open Door Expeditions</title>
    <meta name="title" content="Tour Package Details | Open Door Expeditions">
    <meta name="description" content="Book your Himalayan adventure tour package with Open Door Expeditions. Expert guides, best prices, safe travels. Kedarnath, Do Dham, Char Dham, Kashmir tours available.">
    <meta name="keywords" content="Himalayan tour package, trekking package booking, adventure tour India, package details, tour itinerary, book trekking tour">
    <meta name="author" content="Open Door Expeditions">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook (Dynamic - Updated by JavaScript) -->
    <meta property="og:type" content="product">
    <meta property="og:url" content="https://opendoorexpeditions.com/trip-single">
    <meta property="og:title" content="Tour Package | Open Door Expeditions">
    <meta property="og:description" content="Book your Himalayan adventure tour package. Expert guides, best prices, safe travels.">
    <meta property="og:image" content="https://opendoorexpeditions.com/images/package-og.jpg">
    <meta property="og:locale" content="en_IN">
    
    <!-- Twitter (Dynamic - Updated by JavaScript) -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://opendoorexpeditions.com/trip-single">
    <meta property="twitter:title" content="Tour Package | Open Door Expeditions">
    <meta property="twitter:description" content="Book your Himalayan adventure tour package.">
    <meta property="twitter:image" content="https://opendoorexpeditions.com/images/package-twitter.jpg">
    
    <!-- Canonical (Dynamic - Updated by JavaScript) -->
    <link rel="canonical" href="https://opendoorexpeditions.com/trip-single">
    
    <!-- Favicons -->
    <link rel="shortcut icon" type="image/png" href="images/logos/open door logo 2.0-02.png">
    <!-- Google Fonts Css-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <!-- Bootstrap Css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- SlickNav Css -->
    <link href="css/slicknav.min.css" rel="stylesheet">
    <!-- Swiper Css -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!-- Font Awesome Icon Css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-0xC4pHQtKJkqZpY5K1BZ7m8r3D+y4j8l1Ph4j4bN3uU1+HdMuJ/9DSh1khYH3Uiv+5qg6M1GZ+yMSV+Q8G+dag==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Animated Css -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <!-- Magnific Popup Core Css File -->
    <link rel="stylesheet" href="css/magnific-popup.css">
    <!-- Mouse Cursor Css File -->
    <link rel="stylesheet" href="css/mousecursor.css">
    <!-- Main Custom Css -->
    <link href="css/custom.css" rel="stylesheet" media="screen">
    <!-- Auth Modal Css -->
    <link href="css/auth-modal.css" rel="stylesheet" media="screen">

</head>
<body>
    <!-- Global Loader Start -->
    <div id="globalLoaderContainer"></div>
    <script>
        fetch('global-loader.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('globalLoaderContainer').innerHTML = html;
            });
    </script>
    <!-- Global Loader End -->

    <!-- Topbar Section Start -->
    <div class="topbar">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-7 col-md-6">
                    <!-- Topbar Contact Information Start -->
                    <div class="topbar-contact-info">
                        <ul>
                            <li><img src="images/icon-phone-primary.svg"  style="color: white;"> <a
                                    href="tel:7455059476">+91 7455059476</a></li>
                            <li><img src="images/icon-mail-primary.svg" alt=""> <a
                                    href="mailto:info@opendoorexpeditions.com">info@opendoorexpeditions.com</a></li>
                        </ul>
                    </div>
                    <!-- Topbar Contact Information End -->
                </div>

                <div class="col-lg-5 col-md-6">
                    <!-- Topbar Social Links Start -->
                    <div class="topbar-social-links" >
                        <ul>
                            <li style="color: white;"><a href="#" style="color: white;"><i style="color: white;" class="fa-brands fa-instagram"></i>Instagram</a></li>
                            <li style="color: white;"><a href="#" style="color: white;"><i style="color: white;" class="fa-brands fa-facebook-f"></i>Facebook</a></li>
                           
                        </ul>
                    </div>
                    <!-- Topbar Social Links End -->
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar Section End -->

     <!-- Header Start -->
    <header class="main-header">
        <div class="header-sticky">
            <nav class="navbar  navbar-expand-lg" style="height: 80px;">
                <div class="container">
                    <!-- Logo Start -->
                    <a class="navbar-brand" href="index.html">
                        <img src="images/logos/open door logo 2.0-02.png" id="logo" style="height: 160px; width: auto;" alt="Logo">
                    </a>
                    <!-- Logo End -->

                    <!-- Main Menu Start -->
                    <div class="collapse navbar-collapse main-menu">
                        <div class="nav-menu-wrapper">
                            <ul class="navbar-nav mr-auto" id="menu">
                                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
                                <li class="nav-item"><a class="nav-link" href="treks.html">Treks</a></li>
                                <li class="nav-item"><a class="nav-link" href="expeditions.html">Expeditions</a></li>
                                <li class="nav-item"><a class="nav-link" href="spiritual.html">Spiritual</a></li>
                                <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
                                <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
                            </ul>
                        </div>

                        <!-- Header Btn Start -->
                        <div class="header-btn">
                            <!-- Auth Button (shown when not logged in) -->
                            <button id="authBtn" class="btn-default btn-highlighted" onclick="openModal('loginModal')">
                                <i class="fas fa-user-circle"></i> Get Started
                            </button>
                            
                            <!-- User Profile Dropdown (shown when logged in) -->
                            <div id="userProfileDropdown" class="user-profile-dropdown">
                                <div class="user-profile-btn" onclick="toggleUserDropdown()">
                                    <div class="user-avatar">U</div>
                                    <span class="user-name">User</span>
                                    <i class="fas fa-chevron-down" style="font-size: 12px; color: #94a3b8; margin-left: 5px;"></i>
                                </div>
                                <div class="dropdown-menu-custom">
                                    <a href="profile.html" class="dropdown-item-custom">
                                        <i class="fas fa-user"></i>
                                        <span>My Profile</span>
                                    </a>
                                    <a href="my-bookings.html" class="dropdown-item-custom">
                                        <i class="fas fa-ticket-alt"></i>
                                        <span>My Bookings</span>
                                    </a>
                                    <a href="#" class="dropdown-item-custom" onclick="logout(); return false;">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>Logout</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Header Btn End -->
                    </div>
                    <!-- Main Menu End -->
                    <div class="navbar-toggle"></div>
                </div>
            </nav>
            <div class="responsive-menu"></div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Page Header Section Start -->
    <div class="page-header parallaxie">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="page-header-box">
                        <h1 class="text-anime-style-3" data-cursor="-opaque" id="trip-title">Loading...</h1>
                        <nav class="wow fadeInUp">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">home</a></li>
                                <li class="breadcrumb-item"><a href="trips.html">trips</a></li>
                                <!-- <li class="breadcrumb-item active" aria-current="page" id="trip-breadcrumb">Loading...</li> -->
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Page Header Section End -->

    <!-- Page Trip Single Start -->
    <div class="page-trip-single">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="page-single-sidebar">
                        <div class="page-category-list trip-category-list wow fadeInUp">
                            <h3>Trip Information</h3>
                            <div class="trip-category-body" id="trip-info">
                                <ul>
                                    <li><span>Duration</span><span id="duration">Loading...</span></li>
                                    <li><span>Min Age</span><span id="min-age">Loading...</span></li>
                                    <li><span>Tour Type</span><span id="tour-type">Loading...</span></li>
                                    <li><span>Location</span><span id="location">Loading...</span></li>
                                    <li><span>Price</span><span id="price" style="font-weight: bold; color: #F5AD4C;">Loading...</span></li>
                                </ul>
                                <a href="#" class="btn-default btn-highlighted" id="booking-link" style="width: 100%; text-align: center; display: block;">
                                    <i class="fas fa-ticket-alt"></i> Book Now
                                </a>
                            </div>
                        </div>
                        <div class="sidebar-cta-box wow fadeInUp" data-wow-delay="0.25s">
                            <div class="icon-box">
                                <img src="images/icon-sidebar-cta.svg" alt="CTA Icon">
                            </div>
                            <div class="sidebar-cta-content">
                                <h3>Let's plan your perfect nature escape</h3>
                            </div>
                            <div class="sidebar-cta-contact-list">
                                <ul>
                                    <li><a href="tel:+917455059476"><img src="images/icon-phone-white.svg" alt="Phone"> +91-7455059476</a></li>
                                    <li><a href="mailto:info@opendoorexpeditions.com"><img src="images/icon-mail-white.svg" alt="Email"> info@opendoorexpeditions.com</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8">
                   
                        <!-- Image Gallery Section -->
                        <div class="trip-gallery" id="trip-gallery" style="margin: 40px 0 50px 0; display: none;">
                            <h3 style="font-size: 24px; font-weight: 700; color: #0f172a; margin-bottom: 30px;">
                                <i class="fas fa-images"></i> Photo Gallery
                            </h3>
                            <div class="row" id="gallery-images" style="margin: 0 -10px;">
                                <!-- Dynamic gallery images will load here -->
                            </div>
                        </div>
                        
                        <div class="trip-entry">
                            <p class="wow fadeInUp" id="trip-description-1">Loading...</p>
                            <p class="wow fadeInUp" data-wow-delay="0.2s" id="trip-description-2">Loading...</p>
                            <div class="trip-info-box">
                                <h2 class="text-anime-style-3">Your package at a glance</h2>
                                <p class="wow fadeInUp">To make your journey clear and hassle-free, we've outlined exactly what's included in your adventure package — and what's not. From luxury accommodations and guided experiences to eco-friendly amenities, every detail is designed for your comfort. Please review this section carefully so you know exactly what's covered.</p>
                                <div class="trip-info-body">
                                    <div class="trip-info-item wow fadeInUp" data-wow-delay="0.2s">
                                        <h3>Includes</h3>
                                        <p>Your trip has been carefully designed to provide comfort, adventure, and memorable experiences.</p>
                                        <ul id="includes">
                                            <li>Loading...</li>
                                        </ul>
                                    </div>
                                    <div class="trip-info-item wow fadeInUp" data-wow-delay="0.4s">
                                        <h3>Excludes</h3>
                                        <p>Your trip has been carefully designed to provide comfort, adventure, and memorable experiences.</p>
                                        <ul id="excludes">
                                            <li>Loading...</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="trip-adventure-box">
                                <h2 class="text-anime-style-3">Adventure in pure luxury</h2>
                                <p class="wow fadeInUp" id="adventure-description">Loading...</p>
                                <div class="trip-adventure-body">
                                    <div class="trip-location-list" id="itinerary-list">
                                        <!-- Skeleton Loader -->
                                        <div class="skeleton-content" id="itinerary-skeleton">
                                            <div class="skeleton-itinerary-item skeleton">
                                                <div class="skeleton-itinerary-day skeleton"></div>
                                                <div class="skeleton-itinerary-title skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton" style="width: 90%;"></div>
                                                <div class="skeleton-itinerary-text skeleton" style="width: 80%;"></div>
                                            </div>
                                            <div class="skeleton-itinerary-item skeleton">
                                                <div class="skeleton-itinerary-day skeleton"></div>
                                                <div class="skeleton-itinerary-title skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton" style="width: 85%;"></div>
                                            </div>
                                            <div class="skeleton-itinerary-item skeleton">
                                                <div class="skeleton-itinerary-day skeleton"></div>
                                                <div class="skeleton-itinerary-title skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton"></div>
                                                <div class="skeleton-itinerary-text skeleton" style="width: 95%;"></div>
                                                <div class="skeleton-itinerary-text skeleton" style="width: 70%;"></div>
                                            </div>
                                        </div>
                                        <!-- Dynamic Itinerary Items Will Load Here -->
                                    </div>
                                    <div class="trip-adventure-image">
                                        <figure class="image-anime reveal">
                                            <img src="images/trip-adventure-image.jpg" alt="Adventure Image" id="adventure-image">
                                        </figure>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="page-single-faqs">
                            <div class="section-title">
                                <h2 class="text-anime-style-3" data-cursor="-opaque">Frequently Asked Questions</h2>
                            </div>
                            <div class="faq-accordion" id="faqaccordion">
                                <!-- Dynamic FAQs Will Load Here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Page Trip Single End -->

    <!-- Scrolling Ticker Section Start -->
    <div class="our-scrolling-ticker bg-section">
        <div class="scrolling-ticker-box">
            <div class="scrolling-content">
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Himalayan Trekking</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Mountain Camping</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Sunrise Summits</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Glacial Views</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">River Rafting Adventures</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Snowfall Experiences</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Himalayan Trekking</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Mountain Camping</span>
            </div>
            <div class="scrolling-content">
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Sunrise Summits</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Glacial Views</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">River Rafting Adventures</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Snowfall Experiences</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Himalayan Trekking</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Mountain Camping</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Sunrise Summits</span>
                <span><img src="images/icon-sparkle.svg" alt="Sparkle">Glacial Views</span>
            </div>
        </div>
    </div>
    <!-- Scrolling Ticker Section End -->

    <!-- Footer Start -->
    <footer class="main-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <!-- Main Footer Box Start -->
                    <div class="main-footer-box">
                        <!-- Footer About Start -->
                        <div class="footer-about">
                            <!-- Footer Logo Start -->
                            <div class="footer-logo">
                                <img src="images/logos/open door logo 2.0-02.png" alt="Open Door Expeditions Logo">
                            </div>
                            <!-- Footer Logo End -->

                            <!-- About Footer Content Start -->
                         <div class="about-footer-content">
    <p>Wake up to the soothing sounds of the lake and enjoy a serene morning at our Lakeside Safari Tent.</p>
</div>

                            <!-- About Footer Content End -->

                            <!-- Footer Social Link Start -->
                            <div class="footer-social-links">
                                <h3>Social Media:</h3>
                                <ul>
                                    <li><a href="#"><i class="fa-brands fa-pinterest-p"></i></a></li>
                                    <li><a href="#"><i class="fa-brands fa-x-twitter"></i></a></li>
                                    <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                                    <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                                </ul>
                            </div>
                            <!-- Footer Social Link End -->
                        </div>
                        <!-- Footer About End -->

                        <!-- Footer Links Box Start -->
                        <div class="footer-links-box">
                            <!-- Footer Links Start -->
 <div class="footer-links">
                                <h3>quick links</h3>
                                <ul>
                                    <li><a href="index-3.html">Home</a></li>
                                    <li><a href="about.html">About us</a></li>
                                    <li><a href="trips.html">Expeditions</a></li>
                                    <li><a href="blog.html">Blog</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                </ul>
                            </div>                           
                            <!-- Footer Links End -->

                            <!-- Footer Links Start -->
                            <div class="footer-links">
                                <h3>Glamping Packages</h3>
                                <ul id="footer-packages">
        <li>Loading packages...</li>
    </ul>
                            </div>
                            <script>
document.addEventListener("DOMContentLoaded", async () => {
    const footerList = document.getElementById("footer-packages");

    try {
        const res = await fetch("https://openbacken-production.up.railway.app/api/packages");
        const result = await res.json();

        if (result.success && Array.isArray(result.data) && result.data.length > 0) {
            footerList.innerHTML = ""; // clear 'Loading...' text

            result.data.slice(0, 5).forEach(pkg => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.href = `trip-details.html?slug=${pkg.slug}`;
                a.textContent = pkg.name || "Unnamed Package";
                li.appendChild(a);
                footerList.appendChild(li);
            });
        } else {
            footerList.innerHTML = "<li>No packages found.</li>";
        }
    } catch (err) {
        console.error("Footer packages load failed:", err);
        footerList.innerHTML = "<li>Error loading packages.</li>";
    }
});
</script>

                            <!-- Footer Links End -->
                        </div>
                        <!-- Footer Links Box End -->

                        <!-- Footer Newsletter Box Start -->
                        <div class="footer-newsletter-box">
                            <h3>Subscribe To Our Newsletter</h3>
                            <p>* Sign up to receive curated travel ideas, seasonal discounts.</p>
                            <div class="footer-newsletter-form">
                                <form id="newslettersForm" action="#" method="POST">
                                    <div class="form-group">
                                        <input type="email" name="mail" class="form-control" id="mail"
                                            placeholder="Enter Email Address *" required>
                                        <button type="submit" class="newsletter-btn"><img src="images/arrow-primary.svg"
                                                alt=""></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- Footer Newsletter Box End -->
                    </div>
                    <!-- Main Footer Box End -->
                </div>

                <div class="col-lg-12">
                    <!-- Footer Copyright Text Start -->
                    <div class="footer-copyright-text">
                        <p>Copyright © 2025 All Rights Reserved . Made by  @digitalprachak.com</p>
                    </div>
                    <!-- Footer Copyright Text End -->
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer End -->

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="js/jquery.slicknav.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/waypoints@4.0.1/lib/jquery.waypoints.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.counterup@2.1.0/jquery.counterup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/isotope-layout@3.0.6/dist/isotope.pkgd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="js/SmoothScroll.js"></script>
    <script src="js/parallaxie.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="js/magiccursor.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/SplitText.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.mb.YTPlayer@3.3.9/dist/jquery.mb.YTPlayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wow.js@1.1.2/dist/wow.min.js"></script>
    <script src="js/function.js"></script>
    <!-- Currency Converter Script -->
    <script src="js/currency-converter.js"></script>
    <!-- Razorpay Script -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <!-- Authentication Modals -->
    <div id="authModalsContainer"></div>
    <script>
        fetch('auth-modals.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('authModalsContainer').innerHTML = html;
            });
    </script>
    
    <!-- API Helper, Auth & Booking Scripts -->
    <script src="js/api-helper.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/booking-helper.js"></script>

    <!-- Custom Script for API Fetch -->
    <script>
        // Global variable to store current trip data
        let currentTrip = null;
        
        async function loadTripDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('slug');
            if (!slug) {
                displayError("No trip specified in the URL.");
                return;
            }

            try {
                const response = await fetch(`https://openbacken-production.up.railway.app/api/packages/slug/${slug}`);
                const data = await response.json();

                if (data.success && data.data) {
                    currentTrip = data.data; // Store globally
                    updateTripDetails(currentTrip);
                    console.log('Trip loaded successfully:', currentTrip._id);
                } else {
                    displayError("Trip not found.");
                }
            } catch (error) {
                console.error("Failed to load trip details:", error);
                displayError("An error occurred while loading the trip details. Please try again later.");
            }
        }

        function displayError(message) {
            const titleEl = document.getElementById("trip-title");
            const breadcrumbEl = document.getElementById("trip-breadcrumb");
            const desc1El = document.getElementById("trip-description-1");
            const desc2El = document.getElementById("trip-description-2");
            
            if (titleEl) titleEl.textContent = "Error";
            if (breadcrumbEl) breadcrumbEl.textContent = "Error";
            if (desc1El) desc1El.textContent = message;
            if (desc2El) desc2El.textContent = "";
            
            const durationEl = document.getElementById("duration");
            const minAgeEl = document.getElementById("min-age");
            const tourTypeEl = document.getElementById("tour-type");
            const locationEl = document.getElementById("location");
            
            if (durationEl) durationEl.textContent = "N/A";
            if (minAgeEl) minAgeEl.textContent = "N/A";
            if (tourTypeEl) tourTypeEl.textContent = "N/A";
            if (locationEl) locationEl.textContent = "N/A";
            
            const includesEl = document.getElementById("includes");
            const excludesEl = document.getElementById("excludes");
            
            if (includesEl) includesEl.innerHTML = "<li>Not available</li>";
            if (excludesEl) excludesEl.innerHTML = "<li>Not available</li>";
            
            const itineraryEl = document.getElementById("itinerary-list");
            if (itineraryEl) itineraryEl.innerHTML = `
                <div class="trip-adventure-item wow fadeInUp" data-wow-delay="0.2s">
                    <div class="icon-box">
                        <img src="images/icon-location-primary.svg" alt="Location">
                    </div>
                    <div class="trip-adventure-item-content">
                        <h4>Error</h4>
                        <h3>Unable to Load</h3>
                        <p>${message}</p>
                    </div>
                </div>`;
            
            const faqEl = document.getElementById("faqaccordion");
            if (faqEl) faqEl.innerHTML = `
                <div class="accordion-item wow fadeInUp">
                    <h2 class="accordion-header" id="heading1">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                            Unable to Load FAQs
                        </button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse" aria-labelledby="heading1" data-bs-parent="#faqaccordion">
                        <div class="accordion-body">
                            <p>${message}</p>
                        </div>
                    </div>
                </div>`;
        }

        function updateTripDetails(trip) {
            // Update Page Header
            const titleEl = document.getElementById("trip-title");
            const breadcrumbEl = document.getElementById("trip-breadcrumb");
            if (titleEl) titleEl.textContent = trip.name || "Untitled Trip";
            if (breadcrumbEl) breadcrumbEl.textContent = trip.name || "Untitled Trip";

            // Update Trip Info Sidebar
            const durationEl = document.getElementById("duration");
            const minAgeEl = document.getElementById("min-age");
            const tourTypeEl = document.getElementById("tour-type");
            const locationEl = document.getElementById("location");
            
            if (durationEl) durationEl.textContent = trip.duration || "N/A";
            if (minAgeEl) minAgeEl.textContent = trip.minAge ? `${trip.minAge} Years+` : "12 Years+";
            if (tourTypeEl) tourTypeEl.textContent = trip.category?.name || trip.tags?.join(", ") || "Adventure";
            if (locationEl) locationEl.textContent = `${trip.city || ""}, ${trip.state || ""}`.trim().replace(/^,|,$/g, "") || "N/A";
            
            // Update Price with Currency Conversion
            const priceEl = document.getElementById("price");
            if (priceEl) {
                const priceINR = parseInt(trip.offerPrice || trip.originalPrice || 0);
                if (priceINR > 0) {
                    priceEl.innerHTML = `<span data-price-inr="${priceINR}">₹${priceINR.toLocaleString('en-IN')}</span>`;
                    // Update with current currency after a short delay
                    setTimeout(() => {
                        if (window.currencyConverter) {
                            window.currencyConverter.updateAllPrices();
                        }
                    }, 300);
                } else {
                    priceEl.textContent = "Contact Us";
                }
            }

            // Update Main Image
            const tripImageEl = document.getElementById("trip-image");
            if (tripImageEl) tripImageEl.src = trip.images?.cardImage || "images/trip-image-1.jpg";

            // Update Image Gallery
            if (trip.images?.gallery && Array.isArray(trip.images.gallery) && trip.images.gallery.length > 0) {
                const galleryContainer = document.getElementById("gallery-images");
                const gallerySection = document.getElementById("trip-gallery");
                
                if (!galleryContainer || !gallerySection) return;
                
                galleryContainer.innerHTML = "";
                
                trip.images.gallery.forEach((imageUrl, index) => {
                    if (imageUrl) {
                        const col = document.createElement("div");
                        col.className = "col-md-6 col-sm-6 mb-4";
                        col.innerHTML = `
                            <div style="position: relative; overflow: hidden; border-radius: 12px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); aspect-ratio: 1/1;" 
                                 onclick="window.open('${imageUrl}', '_blank')">
                                <img src="${imageUrl}" 
                                     alt="Gallery Image ${index + 1}" 
                                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px; transition: transform 0.3s ease;"
                                     onmouseover="this.style.transform='scale(1.05)'"
                                     onmouseout="this.style.transform='scale(1)'">
                                <div style="position: absolute; top: 10px; right: 10px; background: rgba(245, 173, 76, 0.9); color: white; padding: 8px 14px; border-radius: 20px; font-size: 13px; font-weight: 600;">
                                    <i class="fas fa-search-plus"></i> View
                                </div>
                            </div>
                        `;
                        galleryContainer.appendChild(col);
                    }
                });
                
                if (galleryContainer.children.length > 0) {
                    gallerySection.style.display = "block";
                }
            }

            // Update Descriptions
            const description = trip.description || "No description available.";
            const desc1El = document.getElementById("trip-description-1");
            const desc2El = document.getElementById("trip-description-2");
            if (desc1El) desc1El.textContent = description.slice(0, 150);
            if (desc2El) desc2El.textContent = description.slice(150) || "";

            // Update Includes and Excludes
            const includesEl = document.getElementById("includes");
            const excludesEl = document.getElementById("excludes");
            if (includesEl) includesEl.innerHTML = trip.inclusions?.map(item => `<li>${item}</li>`).join("") || "<li>No inclusions specified.</li>";
            if (excludesEl) excludesEl.innerHTML = trip.exclusions?.map(item => `<li>${item}</li>`).join("") || "<li>No exclusions specified.</li>";

            // Update Adventure Section
            const adventureDescEl = document.getElementById("adventure-description");
            if (adventureDescEl) adventureDescEl.textContent = trip.overview || trip.description || "Explore the stunning landscapes and wildlife of your destination.";

            // Update Itinerary
            const itineraryList = document.getElementById("itinerary-list");
            if (!itineraryList) return;
            
            // Hide skeleton loader
            const skeleton = document.getElementById("itinerary-skeleton");
            if (skeleton) skeleton.style.display = "none";
            
            // Clear loading content
            const loadingItems = itineraryList.querySelectorAll('.trip-adventure-item');
            loadingItems.forEach(item => item.remove());
            
            if (trip.itinerary && Array.isArray(trip.itinerary)) {
                trip.itinerary.forEach((day, index) => {
                    const dayNum = day.day || (index + 1);
                    const delay = (index * 0.2) + 0.2;
                    const item = document.createElement("div");
                    item.className = `trip-adventure-item wow fadeInUp`;
                    item.setAttribute("data-wow-delay", `${delay}s`);
                    item.style.cssText = "margin-bottom: 25px; padding: 0;";
                    item.innerHTML = `
                        <div class="icon-box">
                            <img src="images/icon-location-primary.svg" alt="Location">
                        </div>
                        <div class="trip-adventure-item-content">
                            <h4>Day ${dayNum}</h4>
                            <h3>${day.title || "Day Activities"}</h3>
                            <p>${day.description || "No details available for this day."}</p>
                        </div>`;
                    itineraryList.appendChild(item);
                });
            } else {
                itineraryList.innerHTML = `
                    <div class="trip-adventure-item wow fadeInUp" data-wow-delay="0.2s">
                        <div class="icon-box">
                            <img src="images/icon-location-primary.svg" alt="Location">
                        </div>
                        <div class="trip-adventure-item-content">
                            <h4>No Itinerary Available</h4>
                            <h3>Check Back Later</h3>
                            <p>Details for this trip are not available at the moment.</p>
                        </div>
                    </div>`;
            }

            // Update Adventure Image
            const adventureImageEl = document.getElementById("adventure-image");
            if (adventureImageEl) adventureImageEl.src = trip.images?.gallery?.[1] || trip.images?.cardImage || "images/trip-adventure-image.jpg";

            // Update Booking Link with handleBookNow function
            const bookingBtn = document.getElementById("booking-link");
            if (bookingBtn) {
                bookingBtn.href = `#`;
                bookingBtn.onclick = (e) => {
                    e.preventDefault();
                    if (!currentTrip || !currentTrip._id) {
                        console.error('Trip data not loaded properly:', currentTrip);
                        alert('Package data not available. Please refresh the page.');
                        return;
                    }
                    console.log('Opening booking modal for trip:', currentTrip._id);
                    handleBookNow(currentTrip._id);
                };
            }

            // Update FAQs
            const faqAccordion = document.getElementById("faqaccordion");
            if (!faqAccordion) return;
            
            faqAccordion.innerHTML = "";
            if (trip.faq && Array.isArray(trip.faq)) {
                trip.faq.forEach((faq, index) => {
                    const accordionItem = document.createElement("div");
                    accordionItem.className = `accordion-item wow fadeInUp`;
                    accordionItem.style.setProperty("--wow-delay", `${index * 0.2}s`);
                    accordionItem.innerHTML = `
                        <h2 class="accordion-header" id="heading${index + 1}">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${index + 1}" aria-expanded="false" aria-controls="collapse${index + 1}">
                                ${faq.question || "Question"}
                            </button>
                        </h2>
                        <div id="collapse${index + 1}" class="accordion-collapse collapse" aria-labelledby="heading${index + 1}" data-bs-parent="#faqaccordion">
                            <div class="accordion-body">
                                <p>${faq.answer || "No answer provided."}</p>
                            </div>
                        </div>`;
                    faqAccordion.appendChild(accordionItem);
                });
            } else {
                faqAccordion.innerHTML = `
                    <div class="accordion-item wow fadeInUp">
                        <h2 class="accordion-header" id="heading1">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                                What safety measures are in place at the campsites?
                            </button>
                        </h2>
                        <div id="collapse1" class="accordion-collapse collapse" aria-labelledby="heading1" data-bs-parent="#faqaccordion">
                            <div class="accordion-body">
                                <p>Your safety is our top priority. All of our glamping sites are located in secure, low-risk natural areas and are regularly inspected for hazards. Each unit includes emergency contact details, basic first-aid supplies, and safety instructions.</p>
                            </div>
                        </div>
                    </div>`;
            }
        }

        // Listen for currency changes and update prices
        window.addEventListener('currencyChanged', () => {
            if (window.currencyConverter) {
                window.currencyConverter.updateAllPrices();
            }
        });

        document.addEventListener("DOMContentLoaded", loadTripDetails);
    </script>
    
    <!-- Global Loader Script -->
    <script src="js/global-loader.js"></script>
</body>
</html>